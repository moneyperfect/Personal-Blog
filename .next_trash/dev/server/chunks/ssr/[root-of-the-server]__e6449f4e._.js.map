{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/personal-site/src/lib/admin-auth.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\n\n/**\n * 验证管理员是否已登录\n */\nexport async function verifyAdminAuth(): Promise<boolean> {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get('admin_token')?.value;\n\n    if (!token) {\n      return false;\n    }\n\n    // 简单的令牌验证（在生产环境中应使用更安全的方法）\n    const decoded = Buffer.from(token, 'base64').toString('utf-8');\n    const [username, timestamp] = decoded.split(':');\n    \n    if (username !== 'admin') {\n      return false;\n    }\n\n    // 检查令牌是否过期（24小时）\n    const tokenTime = parseInt(timestamp, 10);\n    const now = Date.now();\n    const maxAge = 24 * 60 * 60 * 1000; // 24小时\n\n    if (now - tokenTime > maxAge) {\n      return false;\n    }\n\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * 保护路由，如果未登录则重定向到登录页\n */\nexport async function protectAdminRoute() {\n  const isAuthenticated = await verifyAdminAuth();\n  \n  if (!isAuthenticated) {\n    redirect('/admin');\n  }\n}\n\n/**\n * 获取认证状态，用于客户端组件\n */\nexport function getAdminAuthStatus(): boolean {\n  // 注意：这是一个客户端函数，不能使用 cookies()\n  // 实际实现应该在客户端检查 localStorage 或 cookie\n  // 这里返回 false，实际状态由组件自己管理\n  return false;\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;;;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;QAE9C,IAAI,CAAC,OAAO;YACV,OAAO;QACT;QAEA,2BAA2B;QAC3B,MAAM,UAAU,OAAO,IAAI,CAAC,OAAO,UAAU,QAAQ,CAAC;QACtD,MAAM,CAAC,UAAU,UAAU,GAAG,QAAQ,KAAK,CAAC;QAE5C,IAAI,aAAa,SAAS;YACxB,OAAO;QACT;QAEA,iBAAiB;QACjB,MAAM,YAAY,SAAS,WAAW;QACtC,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,SAAS,KAAK,KAAK,KAAK,MAAM,OAAO;QAE3C,IAAI,MAAM,YAAY,QAAQ;YAC5B,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,eAAe;IACpB,MAAM,kBAAkB,MAAM;IAE9B,IAAI,CAAC,iBAAiB;QACpB,IAAA,iMAAQ,EAAC;IACX;AACF;AAKO,SAAS;IACd,8BAA8B;IAC9B,qCAAqC;IACrC,yBAAyB;IACzB,OAAO;AACT"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/personal-site/src/app/admin/dashboard/DashboardClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/dashboard/DashboardClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/dashboard/DashboardClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+S,GAC5U,6EACA","ignoreList":[0]}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/personal-site/src/app/admin/dashboard/DashboardClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/dashboard/DashboardClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/dashboard/DashboardClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","ignoreList":[0]}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/personal-site/src/app/admin/dashboard/page.tsx"],"sourcesContent":["import { protectAdminRoute } from '@/lib/admin-auth';\nimport DashboardClient from './DashboardClient';\n\nexport default async function AdminDashboardPage() {\n  await protectAdminRoute();\n\n  return <DashboardClient />;\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,eAAe;IAC5B,MAAM,IAAA,gJAAiB;IAEvB,qBAAO,8OAAC,+JAAe;;;;;AACzB"}}]
}