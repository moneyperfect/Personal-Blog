{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/personal-site/src/app/api/admin/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { password } = await request.json();\n    const adminPassword = process.env.ADMIN_PASSWORD;\n\n    if (!adminPassword) {\n      return NextResponse.json(\n        { error: '管理员密码未配置' },\n        { status: 500 }\n      );\n    }\n\n    if (password === adminPassword) {\n      // 创建简单的会话令牌（在生产环境中应使用更安全的方法）\n      const token = Buffer.from(`admin:${Date.now()}`).toString('base64');\n      \n      const response = NextResponse.json({ success: true, token });\n      \n      // 设置会话 cookie（1小时有效期）\n      response.cookies.set('admin_token', token, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === 'production',\n        sameSite: 'lax',\n        maxAge: 60 * 60, // 1小时\n        path: '/',\n      });\n\n      return response;\n    } else {\n      return NextResponse.json(\n        { error: '密码不正确' },\n        { status: 401 }\n      );\n    }\n  } catch (error) {\n    console.error('登录错误:', error);\n    return NextResponse.json(\n      { error: '服务器错误' },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QACvC,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc;QAEhD,IAAI,CAAC,eAAe;YAClB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAW,GACpB;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,aAAa,eAAe;YAC9B,6BAA6B;YAC7B,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI,EAAE,QAAQ,CAAC;YAE1D,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM;YAAM;YAE1D,sBAAsB;YACtB,SAAS,OAAO,CAAC,GAAG,CAAC,eAAe,OAAO;gBACzC,UAAU;gBACV,QAAQ,oDAAyB;gBACjC,UAAU;gBACV,QAAQ,KAAK;gBACb,MAAM;YACR;YAEA,OAAO;QACT,OAAO;YACL,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAQ,GACjB;gBAAE,QAAQ;YAAI;QAElB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,SAAS;QACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAQ,GACjB;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}